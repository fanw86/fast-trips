<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How Fast-Trips Works &mdash; fasttrips Development Branch Commit 5e504cb3319b58faac3aca1310cb4ad08dc44ed8 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Input/Output Files" href="io.html" />
    <link rel="prev" title="Getting Started" href="gettingstarted.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> fasttrips
          </a>
              <div class="version">
                0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="usecases.html">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="gettingstarted.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">How Fast-Trips Works</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dynamic-passenger-assignment-dpa-algorithms">Dynamic Passenger Assignment(DPA) Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="#system-design">System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="#skimming">Skimming</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-skimming">Running skimming</a></li>
<li class="toctree-l3"><a class="reference internal" href="#implemented-components">Implemented components</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Pathfinding details</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="io.html">Input/Output Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Using Fast-Trips</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Fast-Trips Classes and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">fasttrips</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>How Fast-Trips Works</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/howitworks.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="how-fast-trips-works">
<h1>How Fast-Trips Works<a class="headerlink" href="#how-fast-trips-works" title="Permalink to this headline"></a></h1>
<section id="dynamic-passenger-assignment-dpa-algorithms">
<h2>Dynamic Passenger Assignment(DPA) Algorithms<a class="headerlink" href="#dynamic-passenger-assignment-dpa-algorithms" title="Permalink to this headline"></a></h2>
<p>Fast-Trips is based on the work of Alireza Khani, Mark Hickman, and others while at University of Arizona.  Associated
academic papers include:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="http://arizona.openrepository.com/arizona/handle/10150/306074">Models and solution algorithms for transit and intermodal passenger assignment (development of FAST-TrIPs model)</a></p></li>
<li><p><a class="reference external" href="http://trrjournalonline.trb.org/doi/10.3141/2284-04">Hyperpaths in networks based on transit schedules</a></p></li>
</ul>
</div></blockquote>
<p>Some other useful resources include:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://drive.google.com/open?id=0Bz-oz0TqHWtNQVdFNXV5eGwtbms">Teaching Materials</a> (currently in draft form) for
the Fast-Trips algorithm.</p></li>
<li><p><a class="reference external" href="https://drive.google.com/open?id=1usCw5FAjAXL44UavBKmCmdr7jFbAnQ-2meMlJwnEl5Y">Term Glossary</a> (currently being
developed collaboratively)</p></li>
</ul>
</div></blockquote>
</section>
<section id="system-design">
<h2>System Design<a class="headerlink" href="#system-design" title="Permalink to this headline"></a></h2>
<p>One of the best ways to understand what is happening internally in Fast-Trips is to trace a single passenger through a
simulation.  This can be done by using the <code class="code docutils literal notranslate"><span class="pre">run_trace.py</span></code> script found in the <code class="code docutils literal notranslate"><span class="pre">/scripts</span></code> directory.</p>
<p>You can also review the following <a class="reference external" href="https://docs.google.com/presentation/d/1ReNqDJP4O_2m882G3NI-4xjnsd6ORjOcDCxOQNGZN4c/edit#slide=id.p">code flow chart</a> (which is a work in progress)</p>
</section>
<section id="skimming">
<h2>Skimming<a class="headerlink" href="#skimming" title="Permalink to this headline"></a></h2>
<p>Skims are average level-of-service indicators. Given that fasttrips is trip-based and dynamic, we need to define an
averaging scheme. Since fasttrips is zone-based, we do not need to worry about spatial aggregation. We are
therefore left with the following dimensions:</p>
<ol class="arabic simple">
<li><p>temporal - which time range do we want to represent</p></li>
<li><p>trip attributes - which access/egress mode combinations and which trip purposes do we want to represent</p></li>
<li><p>personal attributes - user_class and value of time</p></li>
</ol>
<p>Regarding 1), the user has to specify a skimming start time, a skimming end time, and a sample interval. For each
sampling interval, we build a shortest path from each origin to all destinations, calculate common skims,
and then average over time sampling points by taking the mean.</p>
<p>Regarding 2), the user has to provide values for which skims are sought. Any number of combinations can be provided
as long as they are represented in the model (i.e. the access/egress mode need to be defined in the supply and the
path weight file, and the purpose in the path weight file).</p>
<p>Regarding 3), one could provide the mean value of time of the population, or several values to create several skims.</p>
<p>Note that at the moment you will probably want to provide only one combination of (user_class, purpose, VoT) because
of the pathfinding details mentioned in <span class="xref std std-ref">pathfinding_details</span>.</p>
<section id="running-skimming">
<h3>Running skimming<a class="headerlink" href="#running-skimming" title="Permalink to this headline"></a></h3>
<p>Skimming can be run post-assignment by specifying “create_skims = True” in the fasttrips section of the config file.
It can also be run on an unassigned network (i.e. on the service schedule as per input files) by running
Run.run_fasttrips_skimming().</p>
<p>In both cases, fasttrips requires the user to create a csv file specifying the variables listed in
<span class="xref std std-ref">skim_class_file</span>.</p>
</section>
<section id="implemented-components">
<h3>Implemented components<a class="headerlink" href="#implemented-components" title="Permalink to this headline"></a></h3>
<p>All times are in seconds, fares are in whatever currency unit is provided.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">invehicle_time</span></code></dt><dd><p>The time in seconds spent inside a PT vehicle.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">access_time</span></code></dt><dd><p>The time in seconds spent accessing the PT service by the specified access mode, i.e. the time to get from the origin
to the first PT stop.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">egress_time</span></code></dt><dd><p>The time in seconds spent egressing from the PT service by the specified egress mode, i.e. the time to get from the
last PT stop to the destination.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">transfer_time</span></code></dt><dd><p>The time in seconds spent transferring between two stops, necessarily by foot.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">wait_time</span></code></dt><dd><p>The time in seconds spent waiting for the next service at each transfer stop. This is zero for trips without transfer;
there is no wait time at the first stop, see the adaption time component.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">adaption_time</span></code></dt><dd><p>FastTrips’ deterministic pathfinder uses total travel time as its objective to minimise. It finds the next service
that has the earliest arrival time, and then sets the departure time of the trip such that there is no wait time at
the first stop. The time (in seconds) between the start of a given skim time sampling period and the actual
departure time is recorded as adaption_time.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fare</span></code></dt><dd><p>The fare in the provided currency unit.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">num_transfers</span></code></dt><dd><p>The number of transfers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">gen_cost</span></code></dt><dd><p>The generalised cost calculated with the weights provided in <code class="docutils literal notranslate"><span class="pre">pathweights_ft</span></code> and for the specified user_class,
purpose, access_mode, transit_mode, egress_mode, value_of_time combination as provided in <code class="docutils literal notranslate"><span class="pre">config_ft</span></code>.</p>
</dd>
</dl>
</section>
<section id="id1">
<h3>Pathfinding details<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h3>
<p>FastTrips runs skimming as a post-processing step to assignment. Skimming uses deterministic pathfinding, with the only
difference to the point-to-point implementation of the assignment being the built of a shortest path tree per origin
(i.e. one origin to all destinations). This means the deterministic pathfinder as currently implemented determines
what constitutes a shortest path and at the moment this is always with respect to time, not generalised cost.</p>
<p>This also means that currently, running skimming with different values of time, user classes, and purposes will not
generate different paths.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="gettingstarted.html" class="btn btn-neutral float-left" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="io.html" class="btn btn-neutral float-right" title="Input/Output Files" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015-2018, Lisa Zorn.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>